"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/practice/page",{

/***/ "(app-pages-browser)/./app/utils/userProgress.ts":
/*!***********************************!*\
  !*** ./app/utils/userProgress.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addAchievement: () => (/* binding */ addAchievement),\n/* harmony export */   addActivity: () => (/* binding */ addActivity),\n/* harmony export */   getUserProgress: () => (/* binding */ getUserProgress),\n/* harmony export */   initializeUserProgress: () => (/* binding */ initializeUserProgress),\n/* harmony export */   markLessonCompleted: () => (/* binding */ markLessonCompleted),\n/* harmony export */   markTopicCompleted: () => (/* binding */ markTopicCompleted),\n/* harmony export */   recordQuizCompletion: () => (/* binding */ recordQuizCompletion),\n/* harmony export */   updateStreak: () => (/* binding */ updateStreak),\n/* harmony export */   updateStudyTime: () => (/* binding */ updateStudyTime)\n/* harmony export */ });\n/* harmony import */ var _firebase_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../firebase/config */ \"(app-pages-browser)/./app/firebase/config.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n\n\n// Initialize user progress when they first sign up\nasync function initializeUserProgress(userId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const initialProgress = {\n        userId,\n        subjects: {},\n        totalStudyTime: 0,\n        currentStreak: 0,\n        longestStreak: 0,\n        lastStudyDate: new Date(),\n        recentActivity: [] // Initialize as empty array\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(userProgressRef, initialProgress);\n    return initialProgress;\n}\n// Get user progress\nasync function getUserProgress(userId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(userProgressRef);\n    if (docSnap.exists()) {\n        const data = docSnap.data();\n        // Initialize recentActivity if it doesn't exist\n        if (!data.recentActivity || !Array.isArray(data.recentActivity)) {\n            data.recentActivity = [];\n        }\n        // Clean and validate each activity\n        data.recentActivity = data.recentActivity.map((activity)=>{\n            // If activity is empty or invalid, return a default activity\n            if (!activity || typeof activity !== 'object' || Object.keys(activity).length === 0) {\n                return {\n                    id: Date.now().toString(),\n                    type: 'study',\n                    subject: 'unknown',\n                    topic: 'unknown',\n                    timestamp: new Date().toISOString()\n                };\n            }\n            // Ensure all required fields exist with proper types\n            return {\n                id: activity.id || Date.now().toString(),\n                type: activity.type || 'study',\n                subject: activity.subject || 'unknown',\n                topic: activity.topic || 'unknown',\n                timestamp: activity.timestamp ? new Date(activity.timestamp).toISOString() : new Date().toISOString()\n            };\n        });\n        return data;\n    }\n    return null;\n}\n// Mark lesson as completed\nasync function markLessonCompleted(userId, subjectId, topicId, lessonId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        // Initialize subjects if it doesn't exist\n        const subjects = progress.subjects || {};\n        const subject = subjects[subjectId] || {\n            progress: 0,\n            completedTopics: [],\n            completedLessons: {},\n            lastStudied: new Date().toISOString()\n        };\n        // Update completed lessons\n        const topicLessons = subject.completedLessons[topicId] || [];\n        if (!topicLessons.includes(lessonId)) {\n            topicLessons.push(lessonId);\n        }\n        // Calculate topic progress\n        const topicProgress = calculateTopicProgress(topicLessons);\n        // Update subject progress\n        const updatedSubjects = {\n            ...subjects,\n            [subjectId]: {\n                ...subject,\n                completedLessons: {\n                    ...subject.completedLessons,\n                    [topicId]: topicLessons\n                },\n                progress: calculateSubjectProgress(subject, topicId, topicProgress),\n                lastStudied: new Date().toISOString()\n            }\n        };\n        // Create activity with proper timestamp\n        const activity = {\n            id: Date.now().toString(),\n            type: 'study',\n            subject: subjectId,\n            topic: topicId,\n            lessonId,\n            timestamp: new Date().toISOString()\n        };\n        // Update both subjects and add activity in one transaction\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n            subjects: updatedSubjects,\n            recentActivity: [\n                activity,\n                ...progress.recentActivity || []\n            ].slice(0, 10)\n        });\n    }\n}\n// Calculate topic progress based on completed lessons\nfunction calculateTopicProgress(completedLessons) {\n    // Assuming each topic has a fixed number of lessons (e.g., 5)\n    const totalLessons = 5; // This should be dynamic based on actual lesson count\n    return completedLessons.length / totalLessons * 100;\n}\n// Calculate subject progress based on topic progress\nfunction calculateSubjectProgress(subject, updatedTopicId, updatedTopicProgress) {\n    const topics = Object.keys(subject.completedLessons);\n    const totalTopics = topics.length;\n    if (totalTopics === 0) return 0;\n    let totalProgress = 0;\n    topics.forEach((topicId)=>{\n        const topicLessons = subject.completedLessons[topicId] || [];\n        const topicProgress = calculateTopicProgress(topicLessons);\n        totalProgress += topicProgress;\n    });\n    return totalProgress / totalTopics;\n}\n// Update study time\nasync function updateStudyTime(userId, minutesStudied) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        const totalStudyTime = progress.totalStudyTime + minutesStudied;\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n            totalStudyTime\n        });\n    }\n}\n// Mark topic as completed\nasync function markTopicCompleted(userId, subjectId, topicId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        const subject = progress.subjects[subjectId] || {\n            progress: 0,\n            completedTopics: [],\n            lastStudied: new Date()\n        };\n        if (!subject.completedTopics.includes(topicId)) {\n            const updatedSubjects = {\n                ...progress.subjects,\n                [subjectId]: {\n                    ...subject,\n                    completedTopics: [\n                        ...subject.completedTopics,\n                        topicId\n                    ],\n                    lastStudied: new Date()\n                }\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n                subjects: updatedSubjects\n            });\n            // Add activity\n            const activity = {\n                id: Date.now().toString(),\n                type: 'study',\n                subject: subjectId,\n                topic: topicId,\n                timestamp: new Date()\n            };\n            await addActivity(userId, activity);\n        }\n    }\n}\n// Update streak\nasync function updateStreak(userId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        const lastStudyDate = new Date(progress.lastStudyDate);\n        const today = new Date();\n        const diffDays = Math.floor((today.getTime() - lastStudyDate.getTime()) / (1000 * 60 * 60 * 24));\n        let currentStreak = progress.currentStreak;\n        if (diffDays === 1) {\n            // Consecutive day\n            currentStreak += 1;\n            const longestStreak = Math.max(currentStreak, progress.longestStreak);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n                currentStreak,\n                longestStreak,\n                lastStudyDate: today\n            });\n        } else if (diffDays > 1) {\n            // Streak broken\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n                currentStreak: 1,\n                lastStudyDate: today\n            });\n        }\n        // Check for streak achievements\n        if (currentStreak === 7) {\n            await addAchievement(userId, {\n                id: 'week-streak',\n                title: 'Week Warrior',\n                description: 'Studied for 7 days in a row!',\n                unlockedAt: new Date(),\n                icon: '🔥'\n            });\n        }\n    }\n}\n// Add achievement\nasync function addAchievement(userId, achievement) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        const hasAchievement = progress.recentActivity.some((activity)=>activity.topic === achievement.title);\n        if (!hasAchievement) {\n            const activity = {\n                id: Date.now().toString(),\n                type: 'study',\n                subject: 'achievements',\n                topic: achievement.title,\n                timestamp: new Date()\n            };\n            await addActivity(userId, activity);\n        }\n    }\n}\n// Add activity\nasync function addActivity(userId, activity) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        // Ensure all required fields are present and timestamp is in ISO format\n        const activityWithTimestamp = {\n            id: activity.id || Date.now().toString(),\n            type: activity.type || 'study',\n            subject: activity.subject || 'unknown',\n            topic: activity.topic || 'unknown',\n            timestamp: activity.timestamp instanceof Date ? activity.timestamp.toISOString() : new Date().toISOString()\n        };\n        // Ensure recentActivity exists and is an array\n        const currentActivities = Array.isArray(progress.recentActivity) ? progress.recentActivity : [];\n        const updatedActivities = [\n            activityWithTimestamp,\n            ...currentActivities\n        ].slice(0, 10); // Keep only last 10 activities\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n            recentActivity: updatedActivities\n        });\n    }\n}\n// Record quiz completion\nasync function recordQuizCompletion(userId, subject, score) {\n    const activity = {\n        id: Date.now().toString(),\n        type: 'study',\n        subject,\n        topic: 'quiz',\n        timestamp: new Date(),\n        score\n    };\n    await addActivity(userId, activity);\n    // Check for achievements\n    if (score >= 90) {\n        await addAchievement(userId, {\n            id: 'high-scorer',\n            title: 'High Scorer',\n            description: 'Scored 90% or higher on a quiz!',\n            unlockedAt: new Date(),\n            icon: '🎯'\n        });\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC91dGlscy91c2VyUHJvZ3Jlc3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBd0M7QUFDNkM7QUFXckYsbURBQW1EO0FBQzVDLGVBQWVLLHVCQUF1QkMsTUFBYztJQUN6RCxNQUFNQyxrQkFBa0JOLHVEQUFHQSxDQUFDRCxnREFBRUEsRUFBRSxnQkFBZ0JNO0lBRWhELE1BQU1FLGtCQUFnQztRQUNwQ0Y7UUFDQUcsVUFBVSxDQUFDO1FBQ1hDLGdCQUFnQjtRQUNoQkMsZUFBZTtRQUNmQyxlQUFlO1FBQ2ZDLGVBQWUsSUFBSUM7UUFDbkJDLGdCQUFnQixFQUFFLENBQUMsNEJBQTRCO0lBQ2pEO0lBRUEsTUFBTVosMERBQU1BLENBQUNJLGlCQUFpQkM7SUFDOUIsT0FBT0E7QUFDVDtBQUVBLG9CQUFvQjtBQUNiLGVBQWVRLGdCQUFnQlYsTUFBYztJQUNsRCxNQUFNQyxrQkFBa0JOLHVEQUFHQSxDQUFDRCxnREFBRUEsRUFBRSxnQkFBZ0JNO0lBQ2hELE1BQU1XLFVBQVUsTUFBTWYsMERBQU1BLENBQUNLO0lBRTdCLElBQUlVLFFBQVFDLE1BQU0sSUFBSTtRQUNwQixNQUFNQyxPQUFPRixRQUFRRSxJQUFJO1FBQ3pCLGdEQUFnRDtRQUNoRCxJQUFJLENBQUNBLEtBQUtKLGNBQWMsSUFBSSxDQUFDSyxNQUFNQyxPQUFPLENBQUNGLEtBQUtKLGNBQWMsR0FBRztZQUMvREksS0FBS0osY0FBYyxHQUFHLEVBQUU7UUFDMUI7UUFFQSxtQ0FBbUM7UUFDbkNJLEtBQUtKLGNBQWMsR0FBR0ksS0FBS0osY0FBYyxDQUFDTyxHQUFHLENBQUMsQ0FBQ0M7WUFDN0MsNkRBQTZEO1lBQzdELElBQUksQ0FBQ0EsWUFBWSxPQUFPQSxhQUFhLFlBQVlDLE9BQU9DLElBQUksQ0FBQ0YsVUFBVUcsTUFBTSxLQUFLLEdBQUc7Z0JBQ25GLE9BQU87b0JBQ0xDLElBQUliLEtBQUtjLEdBQUcsR0FBR0MsUUFBUTtvQkFDdkJDLE1BQU07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O1FBRUEsK0NBQStDO1FBQy9DLE1BQU00QyxvQkFBb0IxRCxNQUFNQyxPQUFPLENBQUNrQixTQUFTeEIsY0FBYyxJQUMzRHdCLFNBQVN4QixjQUFjLEdBQ3ZCLEVBQUU7UUFFTixNQUFNZ0Usb0JBQW9CO1lBQUNGO2VBQTBCQztTQUFrQixDQUFDNUIsS0FBSyxDQUFDLEdBQUcsS0FBSywrQkFBK0I7UUFFckgsTUFBTTlDLDZEQUFTQSxDQUFDRyxpQkFBaUI7WUFDL0JRLGdCQUFnQmdFO1FBQ2xCO0lBQ0Y7QUFDRjtBQUVBLHlCQUF5QjtBQUNsQixlQUFlQyxxQkFBcUIxRSxNQUFjLEVBQUV5QixPQUFlLEVBQUVrRCxLQUFhO0lBQ3ZGLE1BQU0xRCxXQUEwQjtRQUM5QkksSUFBSWIsS0FBS2MsR0FBRyxHQUFHQyxRQUFRO1FBQ3ZCQyxNQUFNO1FBQ05DO1FBQ0FDLE9BQU87UUFDUEMsV0FBVyxJQUFJbkI7UUFDZm1FO0lBQ0Y7SUFFQSxNQUFNcEIsWUFBWXZELFFBQVFpQjtJQUUxQix5QkFBeUI7SUFDekIsSUFBSTBELFNBQVMsSUFBSTtRQUNmLE1BQU1aLGVBQWUvRCxRQUFRO1lBQzNCcUIsSUFBSTtZQUNKMkMsT0FBTztZQUNQQyxhQUFhO1lBQ2JDLFlBQVksSUFBSTFEO1lBQ2hCMkQsTUFBTTtRQUNSO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxMb25kaVxcRGVza3RvcFxccHJvamVjdHNcXG1hdHJpY2tvbm5la3RcXGFwcFxcdXRpbHNcXHVzZXJQcm9ncmVzcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYiB9IGZyb20gJy4uL2ZpcmViYXNlL2NvbmZpZyc7XHJcbmltcG9ydCB7IGRvYywgZ2V0RG9jLCBzZXREb2MsIHVwZGF0ZURvYywgc2VydmVyVGltZXN0YW1wIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuaW1wb3J0IHsgVXNlclByb2dyZXNzLCBBY3Rpdml0eSwgU3R1ZHlBY3Rpdml0eSB9IGZyb20gJy4uL3R5cGVzL3VzZXInO1xyXG5cclxuaW50ZXJmYWNlIEFjaGlldmVtZW50IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICB1bmxvY2tlZEF0OiBEYXRlO1xyXG4gIGljb246IHN0cmluZztcclxufVxyXG5cclxuLy8gSW5pdGlhbGl6ZSB1c2VyIHByb2dyZXNzIHdoZW4gdGhleSBmaXJzdCBzaWduIHVwXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplVXNlclByb2dyZXNzKHVzZXJJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlclByb2dyZXNzUmVmID0gZG9jKGRiLCAndXNlclByb2dyZXNzJywgdXNlcklkKTtcclxuICBcclxuICBjb25zdCBpbml0aWFsUHJvZ3Jlc3M6IFVzZXJQcm9ncmVzcyA9IHtcclxuICAgIHVzZXJJZCxcclxuICAgIHN1YmplY3RzOiB7fSxcclxuICAgIHRvdGFsU3R1ZHlUaW1lOiAwLFxyXG4gICAgY3VycmVudFN0cmVhazogMCxcclxuICAgIGxvbmdlc3RTdHJlYWs6IDAsXHJcbiAgICBsYXN0U3R1ZHlEYXRlOiBuZXcgRGF0ZSgpLFxyXG4gICAgcmVjZW50QWN0aXZpdHk6IFtdIC8vIEluaXRpYWxpemUgYXMgZW1wdHkgYXJyYXlcclxuICB9O1xyXG5cclxuICBhd2FpdCBzZXREb2ModXNlclByb2dyZXNzUmVmLCBpbml0aWFsUHJvZ3Jlc3MpO1xyXG4gIHJldHVybiBpbml0aWFsUHJvZ3Jlc3M7XHJcbn1cclxuXHJcbi8vIEdldCB1c2VyIHByb2dyZXNzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyUHJvZ3Jlc3ModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJQcm9ncmVzcyB8IG51bGw+IHtcclxuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBkb2MoZGIsICd1c2VyUHJvZ3Jlc3MnLCB1c2VySWQpO1xyXG4gIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2ModXNlclByb2dyZXNzUmVmKTtcclxuICBcclxuICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGRvY1NuYXAuZGF0YSgpO1xyXG4gICAgLy8gSW5pdGlhbGl6ZSByZWNlbnRBY3Rpdml0eSBpZiBpdCBkb2Vzbid0IGV4aXN0XHJcbiAgICBpZiAoIWRhdGEucmVjZW50QWN0aXZpdHkgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS5yZWNlbnRBY3Rpdml0eSkpIHtcclxuICAgICAgZGF0YS5yZWNlbnRBY3Rpdml0eSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENsZWFuIGFuZCB2YWxpZGF0ZSBlYWNoIGFjdGl2aXR5XHJcbiAgICBkYXRhLnJlY2VudEFjdGl2aXR5ID0gZGF0YS5yZWNlbnRBY3Rpdml0eS5tYXAoKGFjdGl2aXR5OiBhbnkpID0+IHtcclxuICAgICAgLy8gSWYgYWN0aXZpdHkgaXMgZW1wdHkgb3IgaW52YWxpZCwgcmV0dXJuIGEgZGVmYXVsdCBhY3Rpdml0eVxyXG4gICAgICBpZiAoIWFjdGl2aXR5IHx8IHR5cGVvZiBhY3Rpdml0eSAhPT0gJ29iamVjdCcgfHwgT2JqZWN0LmtleXMoYWN0aXZpdHkpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgdHlwZTogJ3N0dWR5JyxcclxuICAgICAgICAgIHN1YmplY3Q6ICd1bmtub3duJyxcclxuICAgICAgICAgIHRvcGljOiAndW5rbm93bicsXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEVuc3VyZSBhbGwgcmVxdWlyZWQgZmllbGRzIGV4aXN0IHdpdGggcHJvcGVyIHR5cGVzXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQ6IGFjdGl2aXR5LmlkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgICAgICB0eXBlOiBhY3Rpdml0eS50eXBlIHx8ICdzdHVkeScsXHJcbiAgICAgICAgc3ViamVjdDogYWN0aXZpdHkuc3ViamVjdCB8fCAndW5rbm93bicsXHJcbiAgICAgICAgdG9waWM6IGFjdGl2aXR5LnRvcGljIHx8ICd1bmtub3duJyxcclxuICAgICAgICB0aW1lc3RhbXA6IGFjdGl2aXR5LnRpbWVzdGFtcCA/IG5ldyBEYXRlKGFjdGl2aXR5LnRpbWVzdGFtcCkudG9JU09TdHJpbmcoKSA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGRhdGEgYXMgVXNlclByb2dyZXNzO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLy8gTWFyayBsZXNzb24gYXMgY29tcGxldGVkXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrTGVzc29uQ29tcGxldGVkKFxyXG4gIHVzZXJJZDogc3RyaW5nLFxyXG4gIHN1YmplY3RJZDogc3RyaW5nLFxyXG4gIHRvcGljSWQ6IHN0cmluZyxcclxuICBsZXNzb25JZDogbnVtYmVyXHJcbikge1xyXG4gIGNvbnN0IHVzZXJQcm9ncmVzc1JlZiA9IGRvYyhkYiwgJ3VzZXJQcm9ncmVzcycsIHVzZXJJZCk7XHJcbiAgY29uc3QgcHJvZ3Jlc3MgPSBhd2FpdCBnZXRVc2VyUHJvZ3Jlc3ModXNlcklkKTtcclxuXHJcbiAgaWYgKHByb2dyZXNzKSB7XHJcbiAgICAvLyBJbml0aWFsaXplIHN1YmplY3RzIGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuICAgIGNvbnN0IHN1YmplY3RzID0gcHJvZ3Jlc3Muc3ViamVjdHMgfHwge307XHJcbiAgICBcclxuICAgIGNvbnN0IHN1YmplY3QgPSBzdWJqZWN0c1tzdWJqZWN0SWRdIHx8IHtcclxuICAgICAgcHJvZ3Jlc3M6IDAsXHJcbiAgICAgIGNvbXBsZXRlZFRvcGljczogW10sXHJcbiAgICAgIGNvbXBsZXRlZExlc3NvbnM6IHt9LFxyXG4gICAgICBsYXN0U3R1ZGllZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFVwZGF0ZSBjb21wbGV0ZWQgbGVzc29uc1xyXG4gICAgY29uc3QgdG9waWNMZXNzb25zID0gc3ViamVjdC5jb21wbGV0ZWRMZXNzb25zW3RvcGljSWRdIHx8IFtdO1xyXG4gICAgaWYgKCF0b3BpY0xlc3NvbnMuaW5jbHVkZXMobGVzc29uSWQpKSB7XHJcbiAgICAgIHRvcGljTGVzc29ucy5wdXNoKGxlc3NvbklkKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdG9waWMgcHJvZ3Jlc3NcclxuICAgIGNvbnN0IHRvcGljUHJvZ3Jlc3MgPSBjYWxjdWxhdGVUb3BpY1Byb2dyZXNzKHRvcGljTGVzc29ucyk7XHJcbiAgICBcclxuICAgIC8vIFVwZGF0ZSBzdWJqZWN0IHByb2dyZXNzXHJcbiAgICBjb25zdCB1cGRhdGVkU3ViamVjdHMgPSB7XHJcbiAgICAgIC4uLnN1YmplY3RzLFxyXG4gICAgICBbc3ViamVjdElkXToge1xyXG4gICAgICAgIC4uLnN1YmplY3QsXHJcbiAgICAgICAgY29tcGxldGVkTGVzc29uczoge1xyXG4gICAgICAgICAgLi4uc3ViamVjdC5jb21wbGV0ZWRMZXNzb25zLFxyXG4gICAgICAgICAgW3RvcGljSWRdOiB0b3BpY0xlc3NvbnNcclxuICAgICAgICB9LFxyXG4gICAgICAgIHByb2dyZXNzOiBjYWxjdWxhdGVTdWJqZWN0UHJvZ3Jlc3Moc3ViamVjdCwgdG9waWNJZCwgdG9waWNQcm9ncmVzcyksXHJcbiAgICAgICAgbGFzdFN0dWRpZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIENyZWF0ZSBhY3Rpdml0eSB3aXRoIHByb3BlciB0aW1lc3RhbXBcclxuICAgIGNvbnN0IGFjdGl2aXR5OiBTdHVkeUFjdGl2aXR5ID0ge1xyXG4gICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxyXG4gICAgICB0eXBlOiAnc3R1ZHknLFxyXG4gICAgICBzdWJqZWN0OiBzdWJqZWN0SWQsXHJcbiAgICAgIHRvcGljOiB0b3BpY0lkLFxyXG4gICAgICBsZXNzb25JZCxcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcblxyXG4gICAgLy8gVXBkYXRlIGJvdGggc3ViamVjdHMgYW5kIGFkZCBhY3Rpdml0eSBpbiBvbmUgdHJhbnNhY3Rpb25cclxuICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyUHJvZ3Jlc3NSZWYsIHtcclxuICAgICAgc3ViamVjdHM6IHVwZGF0ZWRTdWJqZWN0cyxcclxuICAgICAgcmVjZW50QWN0aXZpdHk6IFthY3Rpdml0eSwgLi4uKHByb2dyZXNzLnJlY2VudEFjdGl2aXR5IHx8IFtdKV0uc2xpY2UoMCwgMTApXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIENhbGN1bGF0ZSB0b3BpYyBwcm9ncmVzcyBiYXNlZCBvbiBjb21wbGV0ZWQgbGVzc29uc1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVUb3BpY1Byb2dyZXNzKGNvbXBsZXRlZExlc3NvbnM6IG51bWJlcltdKTogbnVtYmVyIHtcclxuICAvLyBBc3N1bWluZyBlYWNoIHRvcGljIGhhcyBhIGZpeGVkIG51bWJlciBvZiBsZXNzb25zIChlLmcuLCA1KVxyXG4gIGNvbnN0IHRvdGFsTGVzc29ucyA9IDU7IC8vIFRoaXMgc2hvdWxkIGJlIGR5bmFtaWMgYmFzZWQgb24gYWN0dWFsIGxlc3NvbiBjb3VudFxyXG4gIHJldHVybiAoY29tcGxldGVkTGVzc29ucy5sZW5ndGggLyB0b3RhbExlc3NvbnMpICogMTAwO1xyXG59XHJcblxyXG4vLyBDYWxjdWxhdGUgc3ViamVjdCBwcm9ncmVzcyBiYXNlZCBvbiB0b3BpYyBwcm9ncmVzc1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVTdWJqZWN0UHJvZ3Jlc3MoXHJcbiAgc3ViamVjdDogYW55LFxyXG4gIHVwZGF0ZWRUb3BpY0lkOiBzdHJpbmcsXHJcbiAgdXBkYXRlZFRvcGljUHJvZ3Jlc3M6IG51bWJlclxyXG4pOiBudW1iZXIge1xyXG4gIGNvbnN0IHRvcGljcyA9IE9iamVjdC5rZXlzKHN1YmplY3QuY29tcGxldGVkTGVzc29ucyk7XHJcbiAgY29uc3QgdG90YWxUb3BpY3MgPSB0b3BpY3MubGVuZ3RoO1xyXG4gIFxyXG4gIGlmICh0b3RhbFRvcGljcyA9PT0gMCkgcmV0dXJuIDA7XHJcbiAgXHJcbiAgbGV0IHRvdGFsUHJvZ3Jlc3MgPSAwO1xyXG4gIHRvcGljcy5mb3JFYWNoKHRvcGljSWQgPT4ge1xyXG4gICAgY29uc3QgdG9waWNMZXNzb25zID0gc3ViamVjdC5jb21wbGV0ZWRMZXNzb25zW3RvcGljSWRdIHx8IFtdO1xyXG4gICAgY29uc3QgdG9waWNQcm9ncmVzcyA9IGNhbGN1bGF0ZVRvcGljUHJvZ3Jlc3ModG9waWNMZXNzb25zKTtcclxuICAgIHRvdGFsUHJvZ3Jlc3MgKz0gdG9waWNQcm9ncmVzcztcclxuICB9KTtcclxuICBcclxuICByZXR1cm4gdG90YWxQcm9ncmVzcyAvIHRvdGFsVG9waWNzO1xyXG59XHJcblxyXG4vLyBVcGRhdGUgc3R1ZHkgdGltZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3R1ZHlUaW1lKHVzZXJJZDogc3RyaW5nLCBtaW51dGVzU3R1ZGllZDogbnVtYmVyKSB7XHJcbiAgY29uc3QgdXNlclByb2dyZXNzUmVmID0gZG9jKGRiLCAndXNlclByb2dyZXNzJywgdXNlcklkKTtcclxuICBjb25zdCBwcm9ncmVzcyA9IGF3YWl0IGdldFVzZXJQcm9ncmVzcyh1c2VySWQpO1xyXG5cclxuICBpZiAocHJvZ3Jlc3MpIHtcclxuICAgIGNvbnN0IHRvdGFsU3R1ZHlUaW1lID0gcHJvZ3Jlc3MudG90YWxTdHVkeVRpbWUgKyBtaW51dGVzU3R1ZGllZDtcclxuICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyUHJvZ3Jlc3NSZWYsIHsgdG90YWxTdHVkeVRpbWUgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBNYXJrIHRvcGljIGFzIGNvbXBsZXRlZFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWFya1RvcGljQ29tcGxldGVkKHVzZXJJZDogc3RyaW5nLCBzdWJqZWN0SWQ6IHN0cmluZywgdG9waWNJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlclByb2dyZXNzUmVmID0gZG9jKGRiLCAndXNlclByb2dyZXNzJywgdXNlcklkKTtcclxuICBjb25zdCBwcm9ncmVzcyA9IGF3YWl0IGdldFVzZXJQcm9ncmVzcyh1c2VySWQpO1xyXG5cclxuICBpZiAocHJvZ3Jlc3MpIHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBwcm9ncmVzcy5zdWJqZWN0c1tzdWJqZWN0SWRdIHx8IHtcclxuICAgICAgcHJvZ3Jlc3M6IDAsXHJcbiAgICAgIGNvbXBsZXRlZFRvcGljczogW10sXHJcbiAgICAgIGxhc3RTdHVkaWVkOiBuZXcgRGF0ZSgpXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICghc3ViamVjdC5jb21wbGV0ZWRUb3BpY3MuaW5jbHVkZXModG9waWNJZCkpIHtcclxuICAgICAgY29uc3QgdXBkYXRlZFN1YmplY3RzID0ge1xyXG4gICAgICAgIC4uLnByb2dyZXNzLnN1YmplY3RzLFxyXG4gICAgICAgIFtzdWJqZWN0SWRdOiB7XHJcbiAgICAgICAgICAuLi5zdWJqZWN0LFxyXG4gICAgICAgICAgY29tcGxldGVkVG9waWNzOiBbLi4uc3ViamVjdC5jb21wbGV0ZWRUb3BpY3MsIHRvcGljSWRdLFxyXG4gICAgICAgICAgbGFzdFN0dWRpZWQ6IG5ldyBEYXRlKClcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2ModXNlclByb2dyZXNzUmVmLCB7IHN1YmplY3RzOiB1cGRhdGVkU3ViamVjdHMgfSk7XHJcblxyXG4gICAgICAvLyBBZGQgYWN0aXZpdHlcclxuICAgICAgY29uc3QgYWN0aXZpdHk6IFN0dWR5QWN0aXZpdHkgPSB7XHJcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgICAgICB0eXBlOiAnc3R1ZHknLFxyXG4gICAgICAgIHN1YmplY3Q6IHN1YmplY3RJZCxcclxuICAgICAgICB0b3BpYzogdG9waWNJZCxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGF3YWl0IGFkZEFjdGl2aXR5KHVzZXJJZCwgYWN0aXZpdHkpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gVXBkYXRlIHN0cmVha1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3RyZWFrKHVzZXJJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlclByb2dyZXNzUmVmID0gZG9jKGRiLCAndXNlclByb2dyZXNzJywgdXNlcklkKTtcclxuICBjb25zdCBwcm9ncmVzcyA9IGF3YWl0IGdldFVzZXJQcm9ncmVzcyh1c2VySWQpO1xyXG5cclxuICBpZiAocHJvZ3Jlc3MpIHtcclxuICAgIGNvbnN0IGxhc3RTdHVkeURhdGUgPSBuZXcgRGF0ZShwcm9ncmVzcy5sYXN0U3R1ZHlEYXRlKTtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGRpZmZEYXlzID0gTWF0aC5mbG9vcigodG9kYXkuZ2V0VGltZSgpIC0gbGFzdFN0dWR5RGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuXHJcbiAgICBsZXQgY3VycmVudFN0cmVhayA9IHByb2dyZXNzLmN1cnJlbnRTdHJlYWs7XHJcbiAgICBpZiAoZGlmZkRheXMgPT09IDEpIHtcclxuICAgICAgLy8gQ29uc2VjdXRpdmUgZGF5XHJcbiAgICAgIGN1cnJlbnRTdHJlYWsgKz0gMTtcclxuICAgICAgY29uc3QgbG9uZ2VzdFN0cmVhayA9IE1hdGgubWF4KGN1cnJlbnRTdHJlYWssIHByb2dyZXNzLmxvbmdlc3RTdHJlYWspO1xyXG4gICAgICBhd2FpdCB1cGRhdGVEb2ModXNlclByb2dyZXNzUmVmLCB7XHJcbiAgICAgICAgY3VycmVudFN0cmVhayxcclxuICAgICAgICBsb25nZXN0U3RyZWFrLFxyXG4gICAgICAgIGxhc3RTdHVkeURhdGU6IHRvZGF5XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChkaWZmRGF5cyA+IDEpIHtcclxuICAgICAgLy8gU3RyZWFrIGJyb2tlblxyXG4gICAgICBhd2FpdCB1cGRhdGVEb2ModXNlclByb2dyZXNzUmVmLCB7XHJcbiAgICAgICAgY3VycmVudFN0cmVhazogMSxcclxuICAgICAgICBsYXN0U3R1ZHlEYXRlOiB0b2RheVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBmb3Igc3RyZWFrIGFjaGlldmVtZW50c1xyXG4gICAgaWYgKGN1cnJlbnRTdHJlYWsgPT09IDcpIHtcclxuICAgICAgYXdhaXQgYWRkQWNoaWV2ZW1lbnQodXNlcklkLCB7XHJcbiAgICAgICAgaWQ6ICd3ZWVrLXN0cmVhaycsXHJcbiAgICAgICAgdGl0bGU6ICdXZWVrIFdhcnJpb3InLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU3R1ZGllZCBmb3IgNyBkYXlzIGluIGEgcm93IScsXHJcbiAgICAgICAgdW5sb2NrZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICBpY29uOiAn8J+UpSdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBZGQgYWNoaWV2ZW1lbnRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEFjaGlldmVtZW50KHVzZXJJZDogc3RyaW5nLCBhY2hpZXZlbWVudDogQWNoaWV2ZW1lbnQpIHtcclxuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBkb2MoZGIsICd1c2VyUHJvZ3Jlc3MnLCB1c2VySWQpO1xyXG4gIGNvbnN0IHByb2dyZXNzID0gYXdhaXQgZ2V0VXNlclByb2dyZXNzKHVzZXJJZCk7XHJcblxyXG4gIGlmIChwcm9ncmVzcykge1xyXG4gICAgY29uc3QgaGFzQWNoaWV2ZW1lbnQgPSBwcm9ncmVzcy5yZWNlbnRBY3Rpdml0eS5zb21lKFxyXG4gICAgICBhY3Rpdml0eSA9PiBhY3Rpdml0eS50b3BpYyA9PT0gYWNoaWV2ZW1lbnQudGl0bGVcclxuICAgICk7XHJcbiAgICBcclxuICAgIGlmICghaGFzQWNoaWV2ZW1lbnQpIHtcclxuICAgICAgY29uc3QgYWN0aXZpdHk6IFN0dWR5QWN0aXZpdHkgPSB7XHJcbiAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgICAgICB0eXBlOiAnc3R1ZHknLFxyXG4gICAgICAgIHN1YmplY3Q6ICdhY2hpZXZlbWVudHMnLFxyXG4gICAgICAgIHRvcGljOiBhY2hpZXZlbWVudC50aXRsZSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGF3YWl0IGFkZEFjdGl2aXR5KHVzZXJJZCwgYWN0aXZpdHkpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gQWRkIGFjdGl2aXR5XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRBY3Rpdml0eSh1c2VySWQ6IHN0cmluZywgYWN0aXZpdHk6IFN0dWR5QWN0aXZpdHkpIHtcclxuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBkb2MoZGIsICd1c2VyUHJvZ3Jlc3MnLCB1c2VySWQpO1xyXG4gIGNvbnN0IHByb2dyZXNzID0gYXdhaXQgZ2V0VXNlclByb2dyZXNzKHVzZXJJZCk7XHJcblxyXG4gIGlmIChwcm9ncmVzcykge1xyXG4gICAgLy8gRW5zdXJlIGFsbCByZXF1aXJlZCBmaWVsZHMgYXJlIHByZXNlbnQgYW5kIHRpbWVzdGFtcCBpcyBpbiBJU08gZm9ybWF0XHJcbiAgICBjb25zdCBhY3Rpdml0eVdpdGhUaW1lc3RhbXAgPSB7XHJcbiAgICAgIGlkOiBhY3Rpdml0eS5pZCB8fCBEYXRlLm5vdygpLnRvU3RyaW5nKCksXHJcbiAgICAgIHR5cGU6IGFjdGl2aXR5LnR5cGUgfHwgJ3N0dWR5JyxcclxuICAgICAgc3ViamVjdDogYWN0aXZpdHkuc3ViamVjdCB8fCAndW5rbm93bicsXHJcbiAgICAgIHRvcGljOiBhY3Rpdml0eS50b3BpYyB8fCAndW5rbm93bicsXHJcbiAgICAgIHRpbWVzdGFtcDogYWN0aXZpdHkudGltZXN0YW1wIGluc3RhbmNlb2YgRGF0ZSBcclxuICAgICAgICA/IGFjdGl2aXR5LnRpbWVzdGFtcC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH07XHJcblxyXG4gICAgLy8gRW5zdXJlIHJlY2VudEFjdGl2aXR5IGV4aXN0cyBhbmQgaXMgYW4gYXJyYXlcclxuICAgIGNvbnN0IGN1cnJlbnRBY3Rpdml0aWVzID0gQXJyYXkuaXNBcnJheShwcm9ncmVzcy5yZWNlbnRBY3Rpdml0eSkgXHJcbiAgICAgID8gcHJvZ3Jlc3MucmVjZW50QWN0aXZpdHkgXHJcbiAgICAgIDogW107XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZEFjdGl2aXRpZXMgPSBbYWN0aXZpdHlXaXRoVGltZXN0YW1wLCAuLi5jdXJyZW50QWN0aXZpdGllc10uc2xpY2UoMCwgMTApOyAvLyBLZWVwIG9ubHkgbGFzdCAxMCBhY3Rpdml0aWVzXHJcbiAgICBcclxuICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyUHJvZ3Jlc3NSZWYsIHtcclxuICAgICAgcmVjZW50QWN0aXZpdHk6IHVwZGF0ZWRBY3Rpdml0aWVzXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFJlY29yZCBxdWl6IGNvbXBsZXRpb25cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlY29yZFF1aXpDb21wbGV0aW9uKHVzZXJJZDogc3RyaW5nLCBzdWJqZWN0OiBzdHJpbmcsIHNjb3JlOiBudW1iZXIpIHtcclxuICBjb25zdCBhY3Rpdml0eTogU3R1ZHlBY3Rpdml0eSA9IHtcclxuICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXHJcbiAgICB0eXBlOiAnc3R1ZHknLFxyXG4gICAgc3ViamVjdCxcclxuICAgIHRvcGljOiAncXVpeicsXHJcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICBzY29yZVxyXG4gIH07XHJcblxyXG4gIGF3YWl0IGFkZEFjdGl2aXR5KHVzZXJJZCwgYWN0aXZpdHkpO1xyXG5cclxuICAvLyBDaGVjayBmb3IgYWNoaWV2ZW1lbnRzXHJcbiAgaWYgKHNjb3JlID49IDkwKSB7XHJcbiAgICBhd2FpdCBhZGRBY2hpZXZlbWVudCh1c2VySWQsIHtcclxuICAgICAgaWQ6ICdoaWdoLXNjb3JlcicsXHJcbiAgICAgIHRpdGxlOiAnSGlnaCBTY29yZXInLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ1Njb3JlZCA5MCUgb3IgaGlnaGVyIG9uIGEgcXVpeiEnLFxyXG4gICAgICB1bmxvY2tlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICBpY29uOiAn8J+OrydcclxuICAgIH0pO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiZGIiLCJkb2MiLCJnZXREb2MiLCJzZXREb2MiLCJ1cGRhdGVEb2MiLCJpbml0aWFsaXplVXNlclByb2dyZXNzIiwidXNlcklkIiwidXNlclByb2dyZXNzUmVmIiwiaW5pdGlhbFByb2dyZXNzIiwic3ViamVjdHMiLCJ0b3RhbFN0dWR5VGltZSIsImN1cnJlbnRTdHJlYWsiLCJsb25nZXN0U3RyZWFrIiwibGFzdFN0dWR5RGF0ZSIsIkRhdGUiLCJyZWNlbnRBY3Rpdml0eSIsImdldFVzZXJQcm9ncmVzcyIsImRvY1NuYXAiLCJleGlzdHMiLCJkYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwiYWN0aXZpdHkiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiaWQiLCJub3ciLCJ0b1N0cmluZyIsInR5cGUiLCJzdWJqZWN0IiwidG9waWMiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsIm1hcmtMZXNzb25Db21wbGV0ZWQiLCJzdWJqZWN0SWQiLCJ0b3BpY0lkIiwibGVzc29uSWQiLCJwcm9ncmVzcyIsImNvbXBsZXRlZFRvcGljcyIsImNvbXBsZXRlZExlc3NvbnMiLCJsYXN0U3R1ZGllZCIsInRvcGljTGVzc29ucyIsImluY2x1ZGVzIiwicHVzaCIsInRvcGljUHJvZ3Jlc3MiLCJjYWxjdWxhdGVUb3BpY1Byb2dyZXNzIiwidXBkYXRlZFN1YmplY3RzIiwiY2FsY3VsYXRlU3ViamVjdFByb2dyZXNzIiwic2xpY2UiLCJ0b3RhbExlc3NvbnMiLCJ1cGRhdGVkVG9waWNJZCIsInVwZGF0ZWRUb3BpY1Byb2dyZXNzIiwidG9waWNzIiwidG90YWxUb3BpY3MiLCJ0b3RhbFByb2dyZXNzIiwiZm9yRWFjaCIsInVwZGF0ZVN0dWR5VGltZSIsIm1pbnV0ZXNTdHVkaWVkIiwibWFya1RvcGljQ29tcGxldGVkIiwiYWRkQWN0aXZpdHkiLCJ1cGRhdGVTdHJlYWsiLCJ0b2RheSIsImRpZmZEYXlzIiwiTWF0aCIsImZsb29yIiwiZ2V0VGltZSIsIm1heCIsImFkZEFjaGlldmVtZW50IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInVubG9ja2VkQXQiLCJpY29uIiwiYWNoaWV2ZW1lbnQiLCJoYXNBY2hpZXZlbWVudCIsInNvbWUiLCJhY3Rpdml0eVdpdGhUaW1lc3RhbXAiLCJjdXJyZW50QWN0aXZpdGllcyIsInVwZGF0ZWRBY3Rpdml0aWVzIiwicmVjb3JkUXVpekNvbXBsZXRpb24iLCJzY29yZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/utils/userProgress.ts\n"));

/***/ })

});