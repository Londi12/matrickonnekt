"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/page",{

/***/ "(app-pages-browser)/./app/utils/userProgress.ts":
/*!***********************************!*\
  !*** ./app/utils/userProgress.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addAchievement: () => (/* binding */ addAchievement),\n/* harmony export */   addActivity: () => (/* binding */ addActivity),\n/* harmony export */   getUserProgress: () => (/* binding */ getUserProgress),\n/* harmony export */   initializeUserProgress: () => (/* binding */ initializeUserProgress),\n/* harmony export */   markLessonCompleted: () => (/* binding */ markLessonCompleted),\n/* harmony export */   markTopicCompleted: () => (/* binding */ markTopicCompleted),\n/* harmony export */   recordQuizCompletion: () => (/* binding */ recordQuizCompletion),\n/* harmony export */   updateStreak: () => (/* binding */ updateStreak),\n/* harmony export */   updateStudyTime: () => (/* binding */ updateStudyTime)\n/* harmony export */ });\n/* harmony import */ var _firebase_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../firebase/config */ \"(app-pages-browser)/./app/firebase/config.ts\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n\n\n// Initialize user progress when they first sign up\nasync function initializeUserProgress(userId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const initialProgress = {\n        userId,\n        subjects: {},\n        totalStudyTime: 0,\n        currentStreak: 0,\n        longestStreak: 0,\n        lastStudyDate: new Date(),\n        recentActivity: [] // Initialize as empty array\n    };\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.setDoc)(userProgressRef, initialProgress);\n    return initialProgress;\n}\n// Helper function to create a valid activity object\nfunction createValidActivity() {\n    let activity = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};\n    const now = new Date().toISOString();\n    return {\n        id: activity.id || Date.now().toString(),\n        type: activity.type || 'study',\n        subject: activity.subject || 'unknown',\n        topic: activity.topic || 'unknown',\n        timestamp: activity.timestamp || now\n    };\n}\n// Get user progress\nasync function getUserProgress(userId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDoc)(userProgressRef);\n    if (docSnap.exists()) {\n        const data = docSnap.data();\n        // Ensure recentActivity is a valid array\n        if (!Array.isArray(data.recentActivity)) {\n            data.recentActivity = [];\n        }\n        // Clean and validate each activity\n        data.recentActivity = data.recentActivity.filter((activity)=>activity && typeof activity === 'object').map((activity)=>createValidActivity(activity));\n        return data;\n    }\n    return null;\n}\n// Mark lesson as completed\nasync function markLessonCompleted(userId, subjectId, topicId, lessonId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (!progress) return;\n    // Initialize subjects if it doesn't exist\n    const subjects = progress.subjects || {};\n    const subject = subjects[subjectId] || {\n        progress: 0,\n        completedTopics: [],\n        completedLessons: {},\n        lastStudied: new Date().toISOString()\n    };\n    // Update completed lessons\n    const topicLessons = subject.completedLessons[topicId] || [];\n    if (!topicLessons.includes(lessonId)) {\n        topicLessons.push(lessonId);\n    }\n    // Calculate topic progress\n    const topicProgress = calculateTopicProgress(topicLessons);\n    // Update subject progress\n    const updatedSubjects = {\n        ...subjects,\n        [subjectId]: {\n            ...subject,\n            completedLessons: {\n                ...subject.completedLessons,\n                [topicId]: topicLessons\n            },\n            progress: calculateSubjectProgress(subject, topicId, topicProgress),\n            lastStudied: new Date().toISOString()\n        }\n    };\n    // Create new activity\n    const newActivity = createValidActivity({\n        type: 'study',\n        subject: subjectId,\n        topic: topicId,\n        lessonId\n    });\n    // Get current activities and ensure they're valid\n    const currentActivities = Array.isArray(progress.recentActivity) ? progress.recentActivity : [];\n    // Update both subjects and activities in one transaction\n    await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n        subjects: updatedSubjects,\n        recentActivity: [\n            newActivity,\n            ...currentActivities\n        ].slice(0, 10)\n    });\n}\n// Calculate topic progress based on completed lessons\nfunction calculateTopicProgress(completedLessons) {\n    // Assuming each topic has a fixed number of lessons (e.g., 5)\n    const totalLessons = 5; // This should be dynamic based on actual lesson count\n    return completedLessons.length / totalLessons * 100;\n}\n// Calculate subject progress based on topic progress\nfunction calculateSubjectProgress(subject, updatedTopicId, updatedTopicProgress) {\n    const topics = Object.keys(subject.completedLessons);\n    const totalTopics = topics.length;\n    if (totalTopics === 0) return 0;\n    let totalProgress = 0;\n    topics.forEach((topicId)=>{\n        const topicLessons = subject.completedLessons[topicId] || [];\n        const topicProgress = calculateTopicProgress(topicLessons);\n        totalProgress += topicProgress;\n    });\n    return totalProgress / totalTopics;\n}\n// Update study time\nasync function updateStudyTime(userId, minutesStudied) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        const totalStudyTime = progress.totalStudyTime + minutesStudied;\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n            totalStudyTime\n        });\n    }\n}\n// Mark topic as completed\nasync function markTopicCompleted(userId, subjectId, topicId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        const subject = progress.subjects[subjectId] || {\n            progress: 0,\n            completedTopics: [],\n            lastStudied: new Date()\n        };\n        if (!subject.completedTopics.includes(topicId)) {\n            const updatedSubjects = {\n                ...progress.subjects,\n                [subjectId]: {\n                    ...subject,\n                    completedTopics: [\n                        ...subject.completedTopics,\n                        topicId\n                    ],\n                    lastStudied: new Date()\n                }\n            };\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n                subjects: updatedSubjects\n            });\n            // Add activity\n            const activity = {\n                id: Date.now().toString(),\n                type: 'study',\n                subject: subjectId,\n                topic: topicId,\n                timestamp: new Date()\n            };\n            await addActivity(userId, activity);\n        }\n    }\n}\n// Update streak\nasync function updateStreak(userId) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        const lastStudyDate = new Date(progress.lastStudyDate);\n        const today = new Date();\n        const diffDays = Math.floor((today.getTime() - lastStudyDate.getTime()) / (1000 * 60 * 60 * 24));\n        let currentStreak = progress.currentStreak;\n        if (diffDays === 1) {\n            // Consecutive day\n            currentStreak += 1;\n            const longestStreak = Math.max(currentStreak, progress.longestStreak);\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n                currentStreak,\n                longestStreak,\n                lastStudyDate: today\n            });\n        } else if (diffDays > 1) {\n            // Streak broken\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n                currentStreak: 1,\n                lastStudyDate: today\n            });\n        }\n        // Check for streak achievements\n        if (currentStreak === 7) {\n            await addAchievement(userId, {\n                id: 'week-streak',\n                title: 'Week Warrior',\n                description: 'Studied for 7 days in a row!',\n                unlockedAt: new Date(),\n                icon: 'ðŸ”¥'\n            });\n        }\n    }\n}\n// Add achievement\nasync function addAchievement(userId, achievement) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        const hasAchievement = progress.recentActivity.some((activity)=>activity.topic === achievement.title);\n        if (!hasAchievement) {\n            const activity = {\n                id: Date.now().toString(),\n                type: 'study',\n                subject: 'achievements',\n                topic: achievement.title,\n                timestamp: new Date()\n            };\n            await addActivity(userId, activity);\n        }\n    }\n}\n// Add activity\nasync function addActivity(userId, activity) {\n    const userProgressRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.doc)(_firebase_config__WEBPACK_IMPORTED_MODULE_0__.db, 'userProgress', userId);\n    const progress = await getUserProgress(userId);\n    if (progress) {\n        // Ensure all required fields are present and timestamp is in ISO format\n        const activityWithTimestamp = {\n            id: activity.id || Date.now().toString(),\n            type: activity.type || 'study',\n            subject: activity.subject || 'unknown',\n            topic: activity.topic || 'unknown',\n            timestamp: activity.timestamp instanceof Date ? activity.timestamp.toISOString() : new Date().toISOString()\n        };\n        // Ensure recentActivity exists and is an array\n        const currentActivities = Array.isArray(progress.recentActivity) ? progress.recentActivity : [];\n        const updatedActivities = [\n            activityWithTimestamp,\n            ...currentActivities\n        ].slice(0, 10); // Keep only last 10 activities\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.updateDoc)(userProgressRef, {\n            recentActivity: updatedActivities\n        });\n    }\n}\n// Record quiz completion\nasync function recordQuizCompletion(userId, subject, score) {\n    const activity = {\n        id: Date.now().toString(),\n        type: 'study',\n        subject,\n        topic: 'quiz',\n        timestamp: new Date(),\n        score\n    };\n    await addActivity(userId, activity);\n    // Check for achievements\n    if (score >= 90) {\n        await addAchievement(userId, {\n            id: 'high-scorer',\n            title: 'High Scorer',\n            description: 'Scored 90% or higher on a quiz!',\n            unlockedAt: new Date(),\n            icon: 'ðŸŽ¯'\n        });\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC91dGlscy91c2VyUHJvZ3Jlc3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBd0M7QUFDNkM7QUFXckYsbURBQW1EO0FBQzVDLGVBQWVLLHVCQUF1QkMsTUFBYztJQUN6RCxNQUFNQyxrQkFBa0JOLHVEQUFHQSxDQUFDRCxnREFBRUEsRUFBRSxnQkFBZ0JNO0lBRWhELE1BQU1FLGtCQUFnQztRQUNwQ0Y7UUFDQUcsVUFBVSxDQUFDO1FBQ1hDLGdCQUFnQjtRQUNoQkMsZUFBZTtRQUNmQyxlQUFlO1FBQ2ZDLGVBQWUsSUFBSUM7UUFDbkJDLGdCQUFnQixFQUFFLENBQUMsNEJBQTRCO0lBQ2pEO0lBRUEsTUFBTVosMERBQU1BLENBQUNJLGlCQUFpQkM7SUFDOUIsT0FBT0E7QUFDVDtBQUVBLG9EQUFvRDtBQUNwRCxTQUFTUTtRQUFvQkMsV0FBQUEsaUVBQWdCLENBQUM7SUFDNUMsTUFBTUMsTUFBTSxJQUFJSixPQUFPSyxXQUFXO0lBQ2xDLE9BQU87UUFDTEMsSUFBSUgsU0FBU0csRUFBRSxJQUFJTixLQUFLSSxHQUFHLEdBQUdHLFFBQVE7UUFDdENDLE1BQU1MLFNBQVNLLElBQUksSUFBSTtRQUN2QkMsU0FBU04sU0FBU00sT0FBTyxJQUFJO1FBQzdCQyxPQUFPUCxTQUFTTyxLQUFLLElBQUk7UUFDekJDLFdBQVdSLFNBQVNRLFNBQVMsSUFBSVA7SUFDbkM7QUFDRjtBQUVBLG9CQUFvQjtBQUNiLGVBQWVRLGdCQUFnQnBCLE1BQWM7SUFDbEQsTUFBTUMsa0JBQWtCTix1REFBR0EsQ0FBQ0QsZ0RBQUVBLEVBQUUsZ0JBQWdCTTtJQUNoRCxNQUFNcUIsVUFBVSxNQUFNekIsMERBQU1BLENBQUNLO0lBRTdCLElBQUlvQixRQUFRQyxNQUFNLElBQUk7UUFDcEIsTUFBTUMsT0FBT0YsUUFBUUUsSUFBSTtRQUV6Qix5Q0FBeUM7UUFDekMsSUFBSSxDQUFDQyxNQUFNQyxPQUFPLENBQUNGLEtBQUtkLGNBQWMsR0FB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LCtCQUErQjtRQUVySCxNQUFNL0MsNkRBQVNBLENBQUNHLGlCQUFpQjtZQUMvQlEsZ0JBQWdCbUU7UUFDbEI7SUFDRjtBQUNGO0FBRUEseUJBQXlCO0FBQ2xCLGVBQWVDLHFCQUFxQjdFLE1BQWMsRUFBRWlCLE9BQWUsRUFBRTZELEtBQWE7SUFDdkYsTUFBTW5FLFdBQTBCO1FBQzlCRyxJQUFJTixLQUFLSSxHQUFHLEdBQUdHLFFBQVE7UUFDdkJDLE1BQU07UUFDTkM7UUFDQUMsT0FBTztRQUNQQyxXQUFXLElBQUlYO1FBQ2ZzRTtJQUNGO0lBRUEsTUFBTW5CLFlBQVkzRCxRQUFRVztJQUUxQix5QkFBeUI7SUFDekIsSUFBSW1FLFNBQVMsSUFBSTtRQUNmLE1BQU1YLGVBQWVuRSxRQUFRO1lBQzNCYyxJQUFJO1lBQ0pzRCxPQUFPO1lBQ1BDLGFBQWE7WUFDYkMsWUFBWSxJQUFJOUQ7WUFDaEIrRCxNQUFNO1FBQ1I7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvbmRpXFxEZXNrdG9wXFxwcm9qZWN0c1xcbWF0cmlja29ubmVrdFxcYXBwXFx1dGlsc1xcdXNlclByb2dyZXNzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRiIH0gZnJvbSAnLi4vZmlyZWJhc2UvY29uZmlnJztcclxuaW1wb3J0IHsgZG9jLCBnZXREb2MsIHNldERvYywgdXBkYXRlRG9jLCBzZXJ2ZXJUaW1lc3RhbXAgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xyXG5pbXBvcnQgeyBVc2VyUHJvZ3Jlc3MsIEFjdGl2aXR5LCBTdHVkeUFjdGl2aXR5IH0gZnJvbSAnLi4vdHlwZXMvdXNlcic7XHJcblxyXG5pbnRlcmZhY2UgQWNoaWV2ZW1lbnQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHVubG9ja2VkQXQ6IERhdGU7XHJcbiAgaWNvbjogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIHVzZXIgcHJvZ3Jlc3Mgd2hlbiB0aGV5IGZpcnN0IHNpZ24gdXBcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVVc2VyUHJvZ3Jlc3ModXNlcklkOiBzdHJpbmcpIHtcclxuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBkb2MoZGIsICd1c2VyUHJvZ3Jlc3MnLCB1c2VySWQpO1xyXG4gIFxyXG4gIGNvbnN0IGluaXRpYWxQcm9ncmVzczogVXNlclByb2dyZXNzID0ge1xyXG4gICAgdXNlcklkLFxyXG4gICAgc3ViamVjdHM6IHt9LFxyXG4gICAgdG90YWxTdHVkeVRpbWU6IDAsXHJcbiAgICBjdXJyZW50U3RyZWFrOiAwLFxyXG4gICAgbG9uZ2VzdFN0cmVhazogMCxcclxuICAgIGxhc3RTdHVkeURhdGU6IG5ldyBEYXRlKCksXHJcbiAgICByZWNlbnRBY3Rpdml0eTogW10gLy8gSW5pdGlhbGl6ZSBhcyBlbXB0eSBhcnJheVxyXG4gIH07XHJcblxyXG4gIGF3YWl0IHNldERvYyh1c2VyUHJvZ3Jlc3NSZWYsIGluaXRpYWxQcm9ncmVzcyk7XHJcbiAgcmV0dXJuIGluaXRpYWxQcm9ncmVzcztcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIHZhbGlkIGFjdGl2aXR5IG9iamVjdFxyXG5mdW5jdGlvbiBjcmVhdGVWYWxpZEFjdGl2aXR5KGFjdGl2aXR5OiBhbnkgPSB7fSk6IFN0dWR5QWN0aXZpdHkge1xyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICByZXR1cm4ge1xyXG4gICAgaWQ6IGFjdGl2aXR5LmlkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgIHR5cGU6IGFjdGl2aXR5LnR5cGUgfHwgJ3N0dWR5JyxcclxuICAgIHN1YmplY3Q6IGFjdGl2aXR5LnN1YmplY3QgfHwgJ3Vua25vd24nLFxyXG4gICAgdG9waWM6IGFjdGl2aXR5LnRvcGljIHx8ICd1bmtub3duJyxcclxuICAgIHRpbWVzdGFtcDogYWN0aXZpdHkudGltZXN0YW1wIHx8IG5vd1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIEdldCB1c2VyIHByb2dyZXNzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyUHJvZ3Jlc3ModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJQcm9ncmVzcyB8IG51bGw+IHtcclxuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBkb2MoZGIsICd1c2VyUHJvZ3Jlc3MnLCB1c2VySWQpO1xyXG4gIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2ModXNlclByb2dyZXNzUmVmKTtcclxuICBcclxuICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGRvY1NuYXAuZGF0YSgpO1xyXG4gICAgXHJcbiAgICAvLyBFbnN1cmUgcmVjZW50QWN0aXZpdHkgaXMgYSB2YWxpZCBhcnJheVxyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRhdGEucmVjZW50QWN0aXZpdHkpKSB7XHJcbiAgICAgIGRhdGEucmVjZW50QWN0aXZpdHkgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGVhbiBhbmQgdmFsaWRhdGUgZWFjaCBhY3Rpdml0eVxyXG4gICAgZGF0YS5yZWNlbnRBY3Rpdml0eSA9IGRhdGEucmVjZW50QWN0aXZpdHlcclxuICAgICAgLmZpbHRlcihhY3Rpdml0eSA9PiBhY3Rpdml0eSAmJiB0eXBlb2YgYWN0aXZpdHkgPT09ICdvYmplY3QnKVxyXG4gICAgICAubWFwKGFjdGl2aXR5ID0+IGNyZWF0ZVZhbGlkQWN0aXZpdHkoYWN0aXZpdHkpKTtcclxuXHJcbiAgICByZXR1cm4gZGF0YSBhcyBVc2VyUHJvZ3Jlc3M7XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vLyBNYXJrIGxlc3NvbiBhcyBjb21wbGV0ZWRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1hcmtMZXNzb25Db21wbGV0ZWQoXHJcbiAgdXNlcklkOiBzdHJpbmcsXHJcbiAgc3ViamVjdElkOiBzdHJpbmcsXHJcbiAgdG9waWNJZDogc3RyaW5nLFxyXG4gIGxlc3NvbklkOiBudW1iZXJcclxuKSB7XHJcbiAgY29uc3QgdXNlclByb2dyZXNzUmVmID0gZG9jKGRiLCAndXNlclByb2dyZXNzJywgdXNlcklkKTtcclxuICBjb25zdCBwcm9ncmVzcyA9IGF3YWl0IGdldFVzZXJQcm9ncmVzcyh1c2VySWQpO1xyXG5cclxuICBpZiAoIXByb2dyZXNzKSByZXR1cm47XHJcblxyXG4gIC8vIEluaXRpYWxpemUgc3ViamVjdHMgaWYgaXQgZG9lc24ndCBleGlzdFxyXG4gIGNvbnN0IHN1YmplY3RzID0gcHJvZ3Jlc3Muc3ViamVjdHMgfHwge307XHJcbiAgXHJcbiAgY29uc3Qgc3ViamVjdCA9IHN1YmplY3RzW3N1YmplY3RJZF0gfHwge1xyXG4gICAgcHJvZ3Jlc3M6IDAsXHJcbiAgICBjb21wbGV0ZWRUb3BpY3M6IFtdLFxyXG4gICAgY29tcGxldGVkTGVzc29uczoge30sXHJcbiAgICBsYXN0U3R1ZGllZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgfTtcclxuXHJcbiAgLy8gVXBkYXRlIGNvbXBsZXRlZCBsZXNzb25zXHJcbiAgY29uc3QgdG9waWNMZXNzb25zID0gc3ViamVjdC5jb21wbGV0ZWRMZXNzb25zW3RvcGljSWRdIHx8IFtdO1xyXG4gIGlmICghdG9waWNMZXNzb25zLmluY2x1ZGVzKGxlc3NvbklkKSkge1xyXG4gICAgdG9waWNMZXNzb25zLnB1c2gobGVzc29uSWQpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ2FsY3VsYXRlIHRvcGljIHByb2dyZXNzXHJcbiAgY29uc3QgdG9waWNQcm9ncmVzcyA9IGNhbGN1bGF0ZVRvcGljUHJvZ3Jlc3ModG9waWNMZXNzb25zKTtcclxuICBcclxuICAvLyBVcGRhdGUgc3ViamVjdCBwcm9ncmVzc1xyXG4gIGNvbnN0IHVwZGF0ZWRTdWJqZWN0cyA9IHtcclxuICAgIC4uLnN1YmplY3RzLFxyXG4gICAgW3N1YmplY3RJZF06IHtcclxuICAgICAgLi4uc3ViamVjdCxcclxuICAgICAgY29tcGxldGVkTGVzc29uczoge1xyXG4gICAgICAgIC4uLnN1YmplY3QuY29tcGxldGVkTGVzc29ucyxcclxuICAgICAgICBbdG9waWNJZF06IHRvcGljTGVzc29uc1xyXG4gICAgICB9LFxyXG4gICAgICBwcm9ncmVzczogY2FsY3VsYXRlU3ViamVjdFByb2dyZXNzKHN1YmplY3QsIHRvcGljSWQsIHRvcGljUHJvZ3Jlc3MpLFxyXG4gICAgICBsYXN0U3R1ZGllZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gQ3JlYXRlIG5ldyBhY3Rpdml0eVxyXG4gIGNvbnN0IG5ld0FjdGl2aXR5ID0gY3JlYXRlVmFsaWRBY3Rpdml0eSh7XHJcbiAgICB0eXBlOiAnc3R1ZHknLFxyXG4gICAgc3ViamVjdDogc3ViamVjdElkLFxyXG4gICAgdG9waWM6IHRvcGljSWQsXHJcbiAgICBsZXNzb25JZFxyXG4gIH0pO1xyXG5cclxuICAvLyBHZXQgY3VycmVudCBhY3Rpdml0aWVzIGFuZCBlbnN1cmUgdGhleSdyZSB2YWxpZFxyXG4gIGNvbnN0IGN1cnJlbnRBY3Rpdml0aWVzID0gQXJyYXkuaXNBcnJheShwcm9ncmVzcy5yZWNlbnRBY3Rpdml0eSkgXHJcbiAgICA/IHByb2dyZXNzLnJlY2VudEFjdGl2aXR5IFxyXG4gICAgOiBbXTtcclxuXHJcbiAgLy8gVXBkYXRlIGJvdGggc3ViamVjdHMgYW5kIGFjdGl2aXRpZXMgaW4gb25lIHRyYW5zYWN0aW9uXHJcbiAgYXdhaXQgdXBkYXRlRG9jKHVzZXJQcm9ncmVzc1JlZiwge1xyXG4gICAgc3ViamVjdHM6IHVwZGF0ZWRTdWJqZWN0cyxcclxuICAgIHJlY2VudEFjdGl2aXR5OiBbbmV3QWN0aXZpdHksIC4uLmN1cnJlbnRBY3Rpdml0aWVzXS5zbGljZSgwLCAxMClcclxuICB9KTtcclxufVxyXG5cclxuLy8gQ2FsY3VsYXRlIHRvcGljIHByb2dyZXNzIGJhc2VkIG9uIGNvbXBsZXRlZCBsZXNzb25zXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVRvcGljUHJvZ3Jlc3MoY29tcGxldGVkTGVzc29uczogbnVtYmVyW10pOiBudW1iZXIge1xyXG4gIC8vIEFzc3VtaW5nIGVhY2ggdG9waWMgaGFzIGEgZml4ZWQgbnVtYmVyIG9mIGxlc3NvbnMgKGUuZy4sIDUpXHJcbiAgY29uc3QgdG90YWxMZXNzb25zID0gNTsgLy8gVGhpcyBzaG91bGQgYmUgZHluYW1pYyBiYXNlZCBvbiBhY3R1YWwgbGVzc29uIGNvdW50XHJcbiAgcmV0dXJuIChjb21wbGV0ZWRMZXNzb25zLmxlbmd0aCAvIHRvdGFsTGVzc29ucykgKiAxMDA7XHJcbn1cclxuXHJcbi8vIENhbGN1bGF0ZSBzdWJqZWN0IHByb2dyZXNzIGJhc2VkIG9uIHRvcGljIHByb2dyZXNzXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVN1YmplY3RQcm9ncmVzcyhcclxuICBzdWJqZWN0OiBhbnksXHJcbiAgdXBkYXRlZFRvcGljSWQ6IHN0cmluZyxcclxuICB1cGRhdGVkVG9waWNQcm9ncmVzczogbnVtYmVyXHJcbik6IG51bWJlciB7XHJcbiAgY29uc3QgdG9waWNzID0gT2JqZWN0LmtleXMoc3ViamVjdC5jb21wbGV0ZWRMZXNzb25zKTtcclxuICBjb25zdCB0b3RhbFRvcGljcyA9IHRvcGljcy5sZW5ndGg7XHJcbiAgXHJcbiAgaWYgKHRvdGFsVG9waWNzID09PSAwKSByZXR1cm4gMDtcclxuICBcclxuICBsZXQgdG90YWxQcm9ncmVzcyA9IDA7XHJcbiAgdG9waWNzLmZvckVhY2godG9waWNJZCA9PiB7XHJcbiAgICBjb25zdCB0b3BpY0xlc3NvbnMgPSBzdWJqZWN0LmNvbXBsZXRlZExlc3NvbnNbdG9waWNJZF0gfHwgW107XHJcbiAgICBjb25zdCB0b3BpY1Byb2dyZXNzID0gY2FsY3VsYXRlVG9waWNQcm9ncmVzcyh0b3BpY0xlc3NvbnMpO1xyXG4gICAgdG90YWxQcm9ncmVzcyArPSB0b3BpY1Byb2dyZXNzO1xyXG4gIH0pO1xyXG4gIFxyXG4gIHJldHVybiB0b3RhbFByb2dyZXNzIC8gdG90YWxUb3BpY3M7XHJcbn1cclxuXHJcbi8vIFVwZGF0ZSBzdHVkeSB0aW1lXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVTdHVkeVRpbWUodXNlcklkOiBzdHJpbmcsIG1pbnV0ZXNTdHVkaWVkOiBudW1iZXIpIHtcclxuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBkb2MoZGIsICd1c2VyUHJvZ3Jlc3MnLCB1c2VySWQpO1xyXG4gIGNvbnN0IHByb2dyZXNzID0gYXdhaXQgZ2V0VXNlclByb2dyZXNzKHVzZXJJZCk7XHJcblxyXG4gIGlmIChwcm9ncmVzcykge1xyXG4gICAgY29uc3QgdG90YWxTdHVkeVRpbWUgPSBwcm9ncmVzcy50b3RhbFN0dWR5VGltZSArIG1pbnV0ZXNTdHVkaWVkO1xyXG4gICAgYXdhaXQgdXBkYXRlRG9jKHVzZXJQcm9ncmVzc1JlZiwgeyB0b3RhbFN0dWR5VGltZSB9KTtcclxuICB9XHJcbn1cclxuXHJcbi8vIE1hcmsgdG9waWMgYXMgY29tcGxldGVkXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrVG9waWNDb21wbGV0ZWQodXNlcklkOiBzdHJpbmcsIHN1YmplY3RJZDogc3RyaW5nLCB0b3BpY0lkOiBzdHJpbmcpIHtcclxuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBkb2MoZGIsICd1c2VyUHJvZ3Jlc3MnLCB1c2VySWQpO1xyXG4gIGNvbnN0IHByb2dyZXNzID0gYXdhaXQgZ2V0VXNlclByb2dyZXNzKHVzZXJJZCk7XHJcblxyXG4gIGlmIChwcm9ncmVzcykge1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IHByb2dyZXNzLnN1YmplY3RzW3N1YmplY3RJZF0gfHwge1xyXG4gICAgICBwcm9ncmVzczogMCxcclxuICAgICAgY29tcGxldGVkVG9waWNzOiBbXSxcclxuICAgICAgbGFzdFN0dWRpZWQ6IG5ldyBEYXRlKClcclxuICAgIH07XHJcblxyXG4gICAgaWYgKCFzdWJqZWN0LmNvbXBsZXRlZFRvcGljcy5pbmNsdWRlcyh0b3BpY0lkKSkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkU3ViamVjdHMgPSB7XHJcbiAgICAgICAgLi4ucHJvZ3Jlc3Muc3ViamVjdHMsXHJcbiAgICAgICAgW3N1YmplY3RJZF06IHtcclxuICAgICAgICAgIC4uLnN1YmplY3QsXHJcbiAgICAgICAgICBjb21wbGV0ZWRUb3BpY3M6IFsuLi5zdWJqZWN0LmNvbXBsZXRlZFRvcGljcywgdG9waWNJZF0sXHJcbiAgICAgICAgICBsYXN0U3R1ZGllZDogbmV3IERhdGUoKVxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyUHJvZ3Jlc3NSZWYsIHsgc3ViamVjdHM6IHVwZGF0ZWRTdWJqZWN0cyB9KTtcclxuXHJcbiAgICAgIC8vIEFkZCBhY3Rpdml0eVxyXG4gICAgICBjb25zdCBhY3Rpdml0eTogU3R1ZHlBY3Rpdml0eSA9IHtcclxuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxyXG4gICAgICAgIHR5cGU6ICdzdHVkeScsXHJcbiAgICAgICAgc3ViamVjdDogc3ViamVjdElkLFxyXG4gICAgICAgIHRvcGljOiB0b3BpY0lkLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXdhaXQgYWRkQWN0aXZpdHkodXNlcklkLCBhY3Rpdml0eSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBVcGRhdGUgc3RyZWFrXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVTdHJlYWsodXNlcklkOiBzdHJpbmcpIHtcclxuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBkb2MoZGIsICd1c2VyUHJvZ3Jlc3MnLCB1c2VySWQpO1xyXG4gIGNvbnN0IHByb2dyZXNzID0gYXdhaXQgZ2V0VXNlclByb2dyZXNzKHVzZXJJZCk7XHJcblxyXG4gIGlmIChwcm9ncmVzcykge1xyXG4gICAgY29uc3QgbGFzdFN0dWR5RGF0ZSA9IG5ldyBEYXRlKHByb2dyZXNzLmxhc3RTdHVkeURhdGUpO1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmZsb29yKCh0b2RheS5nZXRUaW1lKCkgLSBsYXN0U3R1ZHlEYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xyXG5cclxuICAgIGxldCBjdXJyZW50U3RyZWFrID0gcHJvZ3Jlc3MuY3VycmVudFN0cmVhaztcclxuICAgIGlmIChkaWZmRGF5cyA9PT0gMSkge1xyXG4gICAgICAvLyBDb25zZWN1dGl2ZSBkYXlcclxuICAgICAgY3VycmVudFN0cmVhayArPSAxO1xyXG4gICAgICBjb25zdCBsb25nZXN0U3RyZWFrID0gTWF0aC5tYXgoY3VycmVudFN0cmVhaywgcHJvZ3Jlc3MubG9uZ2VzdFN0cmVhayk7XHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyUHJvZ3Jlc3NSZWYsIHtcclxuICAgICAgICBjdXJyZW50U3RyZWFrLFxyXG4gICAgICAgIGxvbmdlc3RTdHJlYWssXHJcbiAgICAgICAgbGFzdFN0dWR5RGF0ZTogdG9kYXlcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKGRpZmZEYXlzID4gMSkge1xyXG4gICAgICAvLyBTdHJlYWsgYnJva2VuXHJcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyh1c2VyUHJvZ3Jlc3NSZWYsIHtcclxuICAgICAgICBjdXJyZW50U3RyZWFrOiAxLFxyXG4gICAgICAgIGxhc3RTdHVkeURhdGU6IHRvZGF5XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGZvciBzdHJlYWsgYWNoaWV2ZW1lbnRzXHJcbiAgICBpZiAoY3VycmVudFN0cmVhayA9PT0gNykge1xyXG4gICAgICBhd2FpdCBhZGRBY2hpZXZlbWVudCh1c2VySWQsIHtcclxuICAgICAgICBpZDogJ3dlZWstc3RyZWFrJyxcclxuICAgICAgICB0aXRsZTogJ1dlZWsgV2FycmlvcicsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdTdHVkaWVkIGZvciA3IGRheXMgaW4gYSByb3chJyxcclxuICAgICAgICB1bmxvY2tlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGljb246ICfwn5SlJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIEFkZCBhY2hpZXZlbWVudFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkQWNoaWV2ZW1lbnQodXNlcklkOiBzdHJpbmcsIGFjaGlldmVtZW50OiBBY2hpZXZlbWVudCkge1xyXG4gIGNvbnN0IHVzZXJQcm9ncmVzc1JlZiA9IGRvYyhkYiwgJ3VzZXJQcm9ncmVzcycsIHVzZXJJZCk7XHJcbiAgY29uc3QgcHJvZ3Jlc3MgPSBhd2FpdCBnZXRVc2VyUHJvZ3Jlc3ModXNlcklkKTtcclxuXHJcbiAgaWYgKHByb2dyZXNzKSB7XHJcbiAgICBjb25zdCBoYXNBY2hpZXZlbWVudCA9IHByb2dyZXNzLnJlY2VudEFjdGl2aXR5LnNvbWUoXHJcbiAgICAgIGFjdGl2aXR5ID0+IGFjdGl2aXR5LnRvcGljID09PSBhY2hpZXZlbWVudC50aXRsZVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgaWYgKCFoYXNBY2hpZXZlbWVudCkge1xyXG4gICAgICBjb25zdCBhY3Rpdml0eTogU3R1ZHlBY3Rpdml0eSA9IHtcclxuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxyXG4gICAgICAgIHR5cGU6ICdzdHVkeScsXHJcbiAgICAgICAgc3ViamVjdDogJ2FjaGlldmVtZW50cycsXHJcbiAgICAgICAgdG9waWM6IGFjaGlldmVtZW50LnRpdGxlLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgYXdhaXQgYWRkQWN0aXZpdHkodXNlcklkLCBhY3Rpdml0eSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyBBZGQgYWN0aXZpdHlcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEFjdGl2aXR5KHVzZXJJZDogc3RyaW5nLCBhY3Rpdml0eTogU3R1ZHlBY3Rpdml0eSkge1xyXG4gIGNvbnN0IHVzZXJQcm9ncmVzc1JlZiA9IGRvYyhkYiwgJ3VzZXJQcm9ncmVzcycsIHVzZXJJZCk7XHJcbiAgY29uc3QgcHJvZ3Jlc3MgPSBhd2FpdCBnZXRVc2VyUHJvZ3Jlc3ModXNlcklkKTtcclxuXHJcbiAgaWYgKHByb2dyZXNzKSB7XHJcbiAgICAvLyBFbnN1cmUgYWxsIHJlcXVpcmVkIGZpZWxkcyBhcmUgcHJlc2VudCBhbmQgdGltZXN0YW1wIGlzIGluIElTTyBmb3JtYXRcclxuICAgIGNvbnN0IGFjdGl2aXR5V2l0aFRpbWVzdGFtcCA9IHtcclxuICAgICAgaWQ6IGFjdGl2aXR5LmlkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgICAgdHlwZTogYWN0aXZpdHkudHlwZSB8fCAnc3R1ZHknLFxyXG4gICAgICBzdWJqZWN0OiBhY3Rpdml0eS5zdWJqZWN0IHx8ICd1bmtub3duJyxcclxuICAgICAgdG9waWM6IGFjdGl2aXR5LnRvcGljIHx8ICd1bmtub3duJyxcclxuICAgICAgdGltZXN0YW1wOiBhY3Rpdml0eS50aW1lc3RhbXAgaW5zdGFuY2VvZiBEYXRlIFxyXG4gICAgICAgID8gYWN0aXZpdHkudGltZXN0YW1wLnRvSVNPU3RyaW5nKClcclxuICAgICAgICA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBFbnN1cmUgcmVjZW50QWN0aXZpdHkgZXhpc3RzIGFuZCBpcyBhbiBhcnJheVxyXG4gICAgY29uc3QgY3VycmVudEFjdGl2aXRpZXMgPSBBcnJheS5pc0FycmF5KHByb2dyZXNzLnJlY2VudEFjdGl2aXR5KSBcclxuICAgICAgPyBwcm9ncmVzcy5yZWNlbnRBY3Rpdml0eSBcclxuICAgICAgOiBbXTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVkQWN0aXZpdGllcyA9IFthY3Rpdml0eVdpdGhUaW1lc3RhbXAsIC4uLmN1cnJlbnRBY3Rpdml0aWVzXS5zbGljZSgwLCAxMCk7IC8vIEtlZXAgb25seSBsYXN0IDEwIGFjdGl2aXRpZXNcclxuICAgIFxyXG4gICAgYXdhaXQgdXBkYXRlRG9jKHVzZXJQcm9ncmVzc1JlZiwge1xyXG4gICAgICByZWNlbnRBY3Rpdml0eTogdXBkYXRlZEFjdGl2aXRpZXNcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuLy8gUmVjb3JkIHF1aXogY29tcGxldGlvblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVjb3JkUXVpekNvbXBsZXRpb24odXNlcklkOiBzdHJpbmcsIHN1YmplY3Q6IHN0cmluZywgc2NvcmU6IG51bWJlcikge1xyXG4gIGNvbnN0IGFjdGl2aXR5OiBTdHVkeUFjdGl2aXR5ID0ge1xyXG4gICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgIHR5cGU6ICdzdHVkeScsXHJcbiAgICBzdWJqZWN0LFxyXG4gICAgdG9waWM6ICdxdWl6JyxcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgIHNjb3JlXHJcbiAgfTtcclxuXHJcbiAgYXdhaXQgYWRkQWN0aXZpdHkodXNlcklkLCBhY3Rpdml0eSk7XHJcblxyXG4gIC8vIENoZWNrIGZvciBhY2hpZXZlbWVudHNcclxuICBpZiAoc2NvcmUgPj0gOTApIHtcclxuICAgIGF3YWl0IGFkZEFjaGlldmVtZW50KHVzZXJJZCwge1xyXG4gICAgICBpZDogJ2hpZ2gtc2NvcmVyJyxcclxuICAgICAgdGl0bGU6ICdIaWdoIFNjb3JlcicsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2NvcmVkIDkwJSBvciBoaWdoZXIgb24gYSBxdWl6IScsXHJcbiAgICAgIHVubG9ja2VkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIGljb246ICfwn46vJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJkYiIsImRvYyIsImdldERvYyIsInNldERvYyIsInVwZGF0ZURvYyIsImluaXRpYWxpemVVc2VyUHJvZ3Jlc3MiLCJ1c2VySWQiLCJ1c2VyUHJvZ3Jlc3NSZWYiLCJpbml0aWFsUHJvZ3Jlc3MiLCJzdWJqZWN0cyIsInRvdGFsU3R1ZHlUaW1lIiwiY3VycmVudFN0cmVhayIsImxvbmdlc3RTdHJlYWsiLCJsYXN0U3R1ZHlEYXRlIiwiRGF0ZSIsInJlY2VudEFjdGl2aXR5IiwiY3JlYXRlVmFsaWRBY3Rpdml0eSIsImFjdGl2aXR5Iiwibm93IiwidG9JU09TdHJpbmciLCJpZCIsInRvU3RyaW5nIiwidHlwZSIsInN1YmplY3QiLCJ0b3BpYyIsInRpbWVzdGFtcCIsImdldFVzZXJQcm9ncmVzcyIsImRvY1NuYXAiLCJleGlzdHMiLCJkYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyIiwibWFwIiwibWFya0xlc3NvbkNvbXBsZXRlZCIsInN1YmplY3RJZCIsInRvcGljSWQiLCJsZXNzb25JZCIsInByb2dyZXNzIiwiY29tcGxldGVkVG9waWNzIiwiY29tcGxldGVkTGVzc29ucyIsImxhc3RTdHVkaWVkIiwidG9waWNMZXNzb25zIiwiaW5jbHVkZXMiLCJwdXNoIiwidG9waWNQcm9ncmVzcyIsImNhbGN1bGF0ZVRvcGljUHJvZ3Jlc3MiLCJ1cGRhdGVkU3ViamVjdHMiLCJjYWxjdWxhdGVTdWJqZWN0UHJvZ3Jlc3MiLCJuZXdBY3Rpdml0eSIsImN1cnJlbnRBY3Rpdml0aWVzIiwic2xpY2UiLCJ0b3RhbExlc3NvbnMiLCJsZW5ndGgiLCJ1cGRhdGVkVG9waWNJZCIsInVwZGF0ZWRUb3BpY1Byb2dyZXNzIiwidG9waWNzIiwiT2JqZWN0Iiwia2V5cyIsInRvdGFsVG9waWNzIiwidG90YWxQcm9ncmVzcyIsImZvckVhY2giLCJ1cGRhdGVTdHVkeVRpbWUiLCJtaW51dGVzU3R1ZGllZCIsIm1hcmtUb3BpY0NvbXBsZXRlZCIsImFkZEFjdGl2aXR5IiwidXBkYXRlU3RyZWFrIiwidG9kYXkiLCJkaWZmRGF5cyIsIk1hdGgiLCJmbG9vciIsImdldFRpbWUiLCJtYXgiLCJhZGRBY2hpZXZlbWVudCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ1bmxvY2tlZEF0IiwiaWNvbiIsImFjaGlldmVtZW50IiwiaGFzQWNoaWV2ZW1lbnQiLCJzb21lIiwiYWN0aXZpdHlXaXRoVGltZXN0YW1wIiwidXBkYXRlZEFjdGl2aXRpZXMiLCJyZWNvcmRRdWl6Q29tcGxldGlvbiIsInNjb3JlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/utils/userProgress.ts\n"));

/***/ })

});